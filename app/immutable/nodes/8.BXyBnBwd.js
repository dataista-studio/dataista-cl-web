import{t as xe,a as Ce,b as be,c as Pe,e as ot,f as Nt,g as gt,h as Ot,i as bt,j as Ct,k as Pt,m as ct,d as St,n as Kt,l as At}from"../chunks/es-ES.D7MRcdya.js";import{c as Rt}from"../chunks/csv.BqGHGP1s.js";import{c as Se,i as Re,a as $,g as ge,b as G,t as ze,s as ee}from"../chunks/disclose-version.BZt-CqMr.js";import{i as Ee}from"../chunks/legacy.ChyV9QrR.js";import{p as Ge,l as q,d as y,o as U,a as Xe,f as z,b as We,m as k,c as F,r as E,t as te,g as s,ai as dt,s as A,w as D,aW as Xt,n as Ne}from"../chunks/index-client.CAcRRAB1.js";import{n as qt,f as ut,a as Fe,s as K,h as et,o as tt,R as xt,D as Qt,C as it,e as Je,p as Vt,i as Ze,c as Jt}from"../chunks/Divider.Bi3SWOah.js";import{b as Zt}from"../chunks/window.Dy_OPEiQ.js";import{l as at,p as m,b as ft,s as rt,a as ne}from"../chunks/props.B-deTbKa.js";import{t as ea,d as ta,g as aa}from"../chunks/utils.BtjziJRB.js";import{d as He,D as sa,a as na,b as ra,c as oa}from"../chunks/DropdownToggle.DGfxQquc.js";import{n as ia,s as je,L as la,S as ca,A as ua,a as fa,b as mt,c as da}from"../chunks/Scatter.DU81uKjH.js";import{C as ha}from"../chunks/ChartWrapper.IyX3TtIM.js";import{M as va}from"../chunks/Meta.DL8lhgqx.js";/* empty css                                                       */import{I as _a}from"../chunks/InteractiveTitle.BdutxEQ3.js";import{k as pa,m as yt,i as ga,n as ba,c as xa,h as ma,o as ya,S as $a,N as wa}from"../chunks/linear.miupU1jD.js";var Ma=G("<a><!></a>"),Ta=G("<button><!></button>");function $t(e,t){const a=at(t,["children","$$slots","$$events","$$legacy"]),i=at(a,["class","active","block","content","close","color","disabled","href","inner","outline","size","value"]);Ge(t,!1);const r=k(),n=k(),u=k();let f=m(t,"class",8,""),o=m(t,"active",8,!1),l=m(t,"block",8,!1),c=m(t,"content",8,""),h=m(t,"close",8,!1),v=m(t,"color",8,"secondary"),p=m(t,"disabled",8,!1),_=m(t,"href",8,""),x=m(t,"inner",12,void 0),g=m(t,"outline",8,!1),b=m(t,"size",8,""),P=m(t,"value",8,"");q(()=>U(a),()=>{y(r,a["aria-label"])}),q(()=>(U(f()),U(h()),U(g()),U(v()),U(b()),U(l()),U(o())),()=>{y(n,qt(f(),h()?"btn-close":"btn",h()||`btn${g()?"-outline":""}-${v()}`,b()?`btn-${b()}`:!1,l()?"d-block w-100":!1,{active:o()}))}),q(()=>U(h()),()=>{y(u,h()?"Close":null)}),Xe(),Ee();var N=Se(),I=z(N);{var L=w=>{var T=Ma();let H;var C=F(T);{var Y=S=>{var W=ze();te(()=>ee(W,c())),$(S,W)},re=S=>{var W=Se(),Q=z(W);Fe(Q,t,"default",{},null),$(S,W)};Re(C,S=>{c()?S(Y):S(re,!1)})}E(T),ft(T,S=>x(S),()=>x()),te(()=>{H=ut(T,H,{...i,class:s(n),href:_(),"aria-label":s(r)||s(u)}),ea(T,"disabled",p())}),ge("click",T,function(S){He.call(this,t,S)}),ge("focus",T,function(S){He.call(this,t,S)}),ge("blur",T,function(S){He.call(this,t,S)}),$(w,T)},d=w=>{var T=Ta();let H;var C=F(T);Fe(C,t,"default",{},Y=>{var re=Se(),S=z(re);{var W=j=>{var B=ze();te(()=>ee(B,c())),$(j,B)},Q=j=>{var B=Se(),Z=z(B);Fe(Z,t,"default",{},null),$(j,B)};Re(S,j=>{c()?j(W):j(Q,!1)})}$(Y,re)}),E(T),ft(T,Y=>x(Y),()=>x()),te(()=>H=ut(T,H,{...i,class:s(n),disabled:p(),value:P(),"aria-label":s(r)||s(u)})),ge("click",T,function(Y){He.call(this,t,Y)}),ge("focus",T,function(Y){He.call(this,t,Y)}),ge("blur",T,function(Y){He.call(this,t,Y)}),$(w,T)};Re(I,w=>{_()?w(L):w(d,!1)})}$(e,N),We()}var Da=G("<div><!></div>");function wt(e,t){const a=at(t,["children","$$slots","$$events","$$legacy"]),i=at(a,["class","size","vertical"]);Ge(t,!1);const r=k();let n=m(t,"class",8,""),u=m(t,"size",8,""),f=m(t,"vertical",8,!1);q(()=>(U(n()),U(u()),U(f())),()=>{y(r,qt(n(),u()?`btn-group-${u()}`:!1,f()?"btn-group-vertical":"btn-group"))}),Xe(),Ee();var o=Da();let l;var c=F(o);Fe(c,t,"default",{},null),E(o),te(()=>l=ut(o,l,{...i,class:s(r)})),$(e,o),We()}const st=xe(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);st.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?xe(t=>{t.setTime(Math.floor(t/e)*e)},(t,a)=>{t.setTime(+t+a*e)},(t,a)=>(a-t)/e):st);st.range;const Be=xe(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ce)},(e,t)=>(t-e)/Ce,e=>e.getUTCSeconds());Be.range;const ht=xe(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ce)},(e,t)=>{e.setTime(+e+t*be)},(e,t)=>(t-e)/be,e=>e.getMinutes());ht.range;const ka=xe(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*be)},(e,t)=>(t-e)/be,e=>e.getUTCMinutes());ka.range;const vt=xe(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ce-e.getMinutes()*be)},(e,t)=>{e.setTime(+e+t*Pe)},(e,t)=>(t-e)/Pe,e=>e.getHours());vt.range;const Na=xe(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Pe)},(e,t)=>(t-e)/Pe,e=>e.getUTCHours());Na.range;const _t=xe(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());_t.range;const Ca=xe(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Ca.range;function Pa(e,t,a,i,r,n){const u=[[Be,1,Ce],[Be,5,5*Ce],[Be,15,15*Ce],[Be,30,30*Ce],[n,1,be],[n,5,5*be],[n,15,15*be],[n,30,30*be],[r,1,Pe],[r,3,3*Pe],[r,6,6*Pe],[r,12,12*Pe],[i,1,gt],[i,2,2*gt],[a,1,Ot],[t,1,bt],[t,3,3*bt],[e,1,ot]];function f(l,c,h){const v=c<l;v&&([l,c]=[c,l]);const p=h&&typeof h.range=="function"?h:o(l,c,h),_=p?p.range(l,+c+1):[];return v?_.reverse():_}function o(l,c,h){const v=Math.abs(c-l)/h,p=pa(([,,g])=>g).right(u,v);if(p===u.length)return e.every(yt(l/ot,c/ot,h));if(p===0)return st.every(Math.max(yt(l,c,h),1));const[_,x]=u[v/u[p-1][2]<u[p][2]/v?p-1:p];return _.every(x)}return[f,o]}const[Sa,Aa]=Pa(Nt,_t,Pt,Ct,vt,ht);function qa(e){return new Date(e)}function Ua(e){return e instanceof Date?+e:+new Date(+e)}function Ut(e,t,a,i,r,n,u,f,o,l){var c=ba(),h=c.invert,v=c.domain,p=l(".%L"),_=l(":%S"),x=l("%I:%M"),g=l("%I %p"),b=l("%a %d"),P=l("%b %d"),N=l("%B"),I=l("%Y");function L(d){return(o(d)<d?p:f(d)<d?_:u(d)<d?x:n(d)<d?g:i(d)<d?r(d)<d?b:P:a(d)<d?N:I)(d)}return c.invert=function(d){return new Date(h(d))},c.domain=function(d){return arguments.length?v(Array.from(d,Ua)):v().map(qa)},c.ticks=function(d){var w=v();return e(w[0],w[w.length-1],d??10)},c.tickFormat=function(d,w){return w==null?L:l(w)},c.nice=function(d){var w=v();return(!d||typeof d.range!="function")&&(d=t(w[0],w[w.length-1],d??10)),d?v(ia(w,d)):c},c.copy=function(){return xa(c,Ut(e,t,a,i,r,n,u,f,o,l))},c}function Ia(){return ga.apply(Ut(Sa,Aa,Nt,_t,Pt,Ct,vt,ht,Be,ct).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Mt(e){return e<0?-1:1}function Tt(e,t,a){var i=e._x1-e._x0,r=t-e._x1,n=(e._y1-e._y0)/(i||r<0&&-0),u=(a-e._y1)/(r||i<0&&-0),f=(n*r+u*i)/(i+r);return(Mt(n)+Mt(u))*Math.min(Math.abs(n),Math.abs(u),.5*Math.abs(f))||0}function Dt(e,t){var a=e._x1-e._x0;return a?(3*(e._y1-e._y0)/a-t)/2:t}function lt(e,t,a){var i=e._x0,r=e._y0,n=e._x1,u=e._y1,f=(n-i)/3;e._context.bezierCurveTo(i+f,r+f*t,n-f,u-f*a,n,u)}function nt(e){this._context=e}nt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:lt(this,this._t0,Dt(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var a=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,lt(this,Dt(this,a=Tt(this,e,t)),a);break;default:lt(this,this._t0,a=Tt(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=a}}};Object.create(nt.prototype).point=function(e,t){nt.prototype.point.call(this,t,e)};function za(e){return new nt(e)}var La=G('<div class="layercake-layout-html svelte-1x3xzit"><!></div>');function Ya(e,t){Ge(t,!1);const[a,i]=rt(),r=()=>ne(u,"$padding",a),n=k(),{padding:u}=dt("LayerCake");let f=m(t,"element",12,void 0),o=m(t,"zIndex",8,void 0),l=m(t,"pointerEvents",8,void 0),c=m(t,"role",8,void 0),h=m(t,"label",8,void 0),v=m(t,"labelledBy",8,void 0),p=m(t,"describedBy",8,void 0);q(()=>(U(c()),U(h()),U(v()),U(p())),()=>{y(n,c()||(h()||v()||p()?"figure":void 0))}),Xe(),Ee();var _=La(),x=F(_);Fe(x,t,"default",{get element(){return f()}},null),E(_),ft(_,g=>f(g),()=>f()),te(()=>{K(_,"role",s(n)),K(_,"aria-label",h()),K(_,"aria-labelledby",v()),K(_,"aria-describedby",p()),je(_,"z-index",o()),je(_,"pointer-events",l()===!1?"none":null),je(_,"top",r().top+"px"),je(_,"right",r().right+"px"),je(_,"bottom",r().bottom+"px"),je(_,"left",r().left+"px")}),$(e,_),We(),i()}St(At);async function Ha({fetch:e}){const t="https://raw.githubusercontent.com/dataista-studio/datos-abiertos/refs/heads/main/aprobacion_presidencial_gabriel_boric.csv";try{const a=await e(t);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const i=Rt(await a.text()),r=Kt("%e %b %Y");i.forEach(o=>{o.aprueba=+o.aprueba.replace("%","").replace(",","."),o.desaprueba=+o.desaprueba.replace("%","").replace(",","."),o.nsnr=+o.nsnr.replace("%","").replace(",","."),o.casos=+o.casos.replace("%","").replace(",","."),o.fecha=o.fecha.indexOf("–")>=0?r(o.fecha.split("–")[1].trim().toLowerCase()):r(o.fecha.trim().toLowerCase()),o.encuesta=o.encuesta.replace(/[\u200B-\u200D\uFEFF]/g,"")}),i.reverse();const n=i.flatMap(o=>({encuesta:o.encuesta,fecha:o.fecha,valor:o.aprueba,peso:Math.round(o.casos*o.aprueba/100),normalizado:o.aprueba/(o.aprueba+o.desaprueba)*100,metrica:"aprueba"})),u=i.flatMap(o=>({encuesta:o.encuesta,fecha:o.fecha,valor:o.desaprueba,peso:Math.round(o.casos*o.desaprueba/100),normalizado:o.desaprueba/(o.aprueba+o.desaprueba)*100,metrica:"desaprueba"})),f=[...n,...u];return{data:i,allData:f}}catch(a){return console.error("Error en load():",a),{data:[],allData:[]}}}const As=Object.freeze(Object.defineProperty({__proto__:null,load:Ha},Symbol.toStringTag,{value:"Module"}));function ja(e){const t=+this._x.call(null,e),a=+this._y.call(null,e);return It(this.cover(t,a),t,a,e)}function It(e,t,a,i){if(isNaN(t)||isNaN(a))return e;var r,n=e._root,u={data:i},f=e._x0,o=e._y0,l=e._x1,c=e._y1,h,v,p,_,x,g,b,P;if(!n)return e._root=u,e;for(;n.length;)if((x=t>=(h=(f+l)/2))?f=h:l=h,(g=a>=(v=(o+c)/2))?o=v:c=v,r=n,!(n=n[b=g<<1|x]))return r[b]=u,e;if(p=+e._x.call(null,n.data),_=+e._y.call(null,n.data),t===p&&a===_)return u.next=n,r?r[b]=u:e._root=u,e;do r=r?r[b]=new Array(4):e._root=new Array(4),(x=t>=(h=(f+l)/2))?f=h:l=h,(g=a>=(v=(o+c)/2))?o=v:c=v;while((b=g<<1|x)===(P=(_>=v)<<1|p>=h));return r[P]=n,r[b]=u,e}function Ba(e){var t,a,i=e.length,r,n,u=new Array(i),f=new Array(i),o=1/0,l=1/0,c=-1/0,h=-1/0;for(a=0;a<i;++a)isNaN(r=+this._x.call(null,t=e[a]))||isNaN(n=+this._y.call(null,t))||(u[a]=r,f[a]=n,r<o&&(o=r),r>c&&(c=r),n<l&&(l=n),n>h&&(h=n));if(o>c||l>h)return this;for(this.cover(o,l).cover(c,h),a=0;a<i;++a)It(this,u[a],f[a],e[a]);return this}function Fa(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var a=this._x0,i=this._y0,r=this._x1,n=this._y1;if(isNaN(a))r=(a=Math.floor(e))+1,n=(i=Math.floor(t))+1;else{for(var u=r-a||1,f=this._root,o,l;a>e||e>=r||i>t||t>=n;)switch(l=(t<i)<<1|e<a,o=new Array(4),o[l]=f,f=o,u*=2,l){case 0:r=a+u,n=i+u;break;case 1:a=r-u,n=i+u;break;case 2:r=a+u,i=n-u;break;case 3:a=r-u,i=n-u;break}this._root&&this._root.length&&(this._root=f)}return this._x0=a,this._y0=i,this._x1=r,this._y1=n,this}function Ea(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Ga(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function R(e,t,a,i,r){this.node=e,this.x0=t,this.y0=a,this.x1=i,this.y1=r}function Wa(e,t,a){var i,r=this._x0,n=this._y0,u,f,o,l,c=this._x1,h=this._y1,v=[],p=this._root,_,x;for(p&&v.push(new R(p,r,n,c,h)),a==null?a=1/0:(r=e-a,n=t-a,c=e+a,h=t+a,a*=a);_=v.pop();)if(!(!(p=_.node)||(u=_.x0)>c||(f=_.y0)>h||(o=_.x1)<r||(l=_.y1)<n))if(p.length){var g=(u+o)/2,b=(f+l)/2;v.push(new R(p[3],g,b,o,l),new R(p[2],u,b,g,l),new R(p[1],g,f,o,b),new R(p[0],u,f,g,b)),(x=(t>=b)<<1|e>=g)&&(_=v[v.length-1],v[v.length-1]=v[v.length-1-x],v[v.length-1-x]=_)}else{var P=e-+this._x.call(null,p.data),N=t-+this._y.call(null,p.data),I=P*P+N*N;if(I<a){var L=Math.sqrt(a=I);r=e-L,n=t-L,c=e+L,h=t+L,i=p.data}}return i}function Oa(e){if(isNaN(c=+this._x.call(null,e))||isNaN(h=+this._y.call(null,e)))return this;var t,a=this._root,i,r,n,u=this._x0,f=this._y0,o=this._x1,l=this._y1,c,h,v,p,_,x,g,b;if(!a)return this;if(a.length)for(;;){if((_=c>=(v=(u+o)/2))?u=v:o=v,(x=h>=(p=(f+l)/2))?f=p:l=p,t=a,!(a=a[g=x<<1|_]))return this;if(!a.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(i=t,b=g)}for(;a.data!==e;)if(r=a,!(a=a.next))return this;return(n=a.next)&&delete a.next,r?(n?r.next=n:delete r.next,this):t?(n?t[g]=n:delete t[g],(a=t[0]||t[1]||t[2]||t[3])&&a===(t[3]||t[2]||t[1]||t[0])&&!a.length&&(i?i[b]=a:this._root=a),this):(this._root=n,this)}function Ka(e){for(var t=0,a=e.length;t<a;++t)this.remove(e[t]);return this}function Ra(){return this._root}function Xa(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Qa(e){var t=[],a,i=this._root,r,n,u,f,o;for(i&&t.push(new R(i,this._x0,this._y0,this._x1,this._y1));a=t.pop();)if(!e(i=a.node,n=a.x0,u=a.y0,f=a.x1,o=a.y1)&&i.length){var l=(n+f)/2,c=(u+o)/2;(r=i[3])&&t.push(new R(r,l,c,f,o)),(r=i[2])&&t.push(new R(r,n,c,l,o)),(r=i[1])&&t.push(new R(r,l,u,f,c)),(r=i[0])&&t.push(new R(r,n,u,l,c))}return this}function Va(e){var t=[],a=[],i;for(this._root&&t.push(new R(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var n,u=i.x0,f=i.y0,o=i.x1,l=i.y1,c=(u+o)/2,h=(f+l)/2;(n=r[0])&&t.push(new R(n,u,f,c,h)),(n=r[1])&&t.push(new R(n,c,f,o,h)),(n=r[2])&&t.push(new R(n,u,h,c,l)),(n=r[3])&&t.push(new R(n,c,h,o,l))}a.push(i)}for(;i=a.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function Ja(e){return e[0]}function Za(e){return arguments.length?(this._x=e,this):this._x}function es(e){return e[1]}function ts(e){return arguments.length?(this._y=e,this):this._y}function zt(e,t,a){var i=new pt(t??Ja,a??es,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function pt(e,t,a,i,r,n){this._x=e,this._y=t,this._x0=a,this._y0=i,this._x1=r,this._y1=n,this._root=void 0}function kt(e){for(var t={data:e.data},a=t;e=e.next;)a=a.next={data:e.data};return t}var X=zt.prototype=pt.prototype;X.copy=function(){var e=new pt(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,a,i;if(!t)return e;if(!t.length)return e._root=kt(t),e;for(a=[{source:t,target:e._root=new Array(4)}];t=a.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?a.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=kt(i));return e};X.add=ja;X.addAll=Ba;X.cover=Fa;X.data=Ea;X.extent=Ga;X.find=Wa;X.remove=Oa;X.removeAll=Ka;X.root=Ra;X.size=Xa;X.visit=Qa;X.visitAfter=Va;X.x=Za;X.y=ts;var as=G('<div class="bg svelte-n2rx0m" role="tooltip"></div> <!>',1);function ss(e,t){Ge(t,!1);const[a,i]=rt(),r=()=>ne(p,"$xGet",a),n=()=>ne(_,"$yGet",a),u=()=>ne(x,"$width",a),f=()=>ne(g,"$height",a),o=()=>ne(v,"$data",a),l=k(),c=k(),h=k(),{data:v,xGet:p,yGet:_,width:x,height:g}=dt("LayerCake");let b=k(!1),P=k({}),N=k({}),I=m(t,"x",8,"x"),L=m(t,"y",8,"y"),d=m(t,"searchRadius",8,void 0),w=m(t,"dataset",8,void 0);function T(W){y(N,W);const Q=`layer${I().toUpperCase()}`,j=`layer${L().toUpperCase()}`;y(P,s(h).find(W[Q],W[j],d())||{}),y(b,Object.keys(s(P)).length>0)}q(()=>(U(I()),r(),n()),()=>{y(l,I()==="x"?r():n())}),q(()=>(U(L()),n(),r()),()=>{y(c,L()==="y"?n():r())}),q(()=>(u(),f(),s(l),s(c),U(w()),o()),()=>{y(h,zt().extent([[-1,-1],[u()+1,f()+1]]).x(s(l)).y(s(c)).addAll(w()||o()))}),Xe(),Ee();var H=as(),C=z(H),Y=A(C,2);const re=D(()=>s(l)(s(P))||0),S=D(()=>s(c)(s(P))||0);Fe(Y,t,"default",{get x(){return s(re)},get y(){return s(S)},get found(){return s(P)},get visible(){return s(b)},get e(){return s(N)}},null),ge("mousemove",C,T),ge("mouseout",C,()=>y(b,!1)),ge("blur",C,()=>y(b,!1)),$(e,H),We(),i()}var ns=G('<div class="line svelte-v0qlcs"></div> <div class="tooltip svelte-v0qlcs"><div class="title svelte-v0qlcs"> </div> <div class="subtitle svelte-v0qlcs"> </div></div> <div class="tooltip svelte-v0qlcs"><div class="legend-label svelte-v0qlcs"> </div></div> <div class="tooltip svelte-v0qlcs"><div class="legend-label svelte-v0qlcs"> </div></div>',1),rs=G('<div class="tooltip svelte-v0qlcs"><div class="legend-label svelte-v0qlcs"> </div></div> <div class="tooltip svelte-v0qlcs"><div class="legend-label svelte-v0qlcs"> </div></div>',1);function os(e,t){Ge(t,!1);const[a,i]=rt(),r=()=>ne(l,"$data",a),n=()=>ne(h,"$yScale",a),u=()=>ne(v,"$yDomain",a),f=()=>ne(p,"$config",a),o=()=>ne(c,"$xScale",a),{data:l,xScale:c,yScale:h,yDomain:v,config:p}=dt("LayerCake"),_=ma(","),x=d=>d.replace(/^\w/,w=>w.toUpperCase());let g=m(t,"formatTitle",8,d=>d);m(t,"formatValue",8,d=>isNaN(+d)?d:_(d)),m(t,"formatKey",8,d=>x(d));let b=m(t,"offset",8,0),P=m(t,"dataset",8,void 0);const N=150,I=d=>`${d.toFixed(1)}%`;Ee();const L=D(()=>P()||r());ss(e,{get dataset(){return s(L)},y:"x",children:Xt,$$slots:{default:(d,w)=>{const T=D(()=>w.x),H=D(()=>w.visible),C=D(()=>w.found);var Y=Se(),re=z(Y);{var S=Q=>{var j=ns(),B=z(j),Z=A(B,2),fe=F(Z),Le=F(fe,!0);E(fe);var ce=A(fe,2),me=F(ce,!0);E(ce),E(Z);var de=A(Z,2),ye=F(de);K(ye,"style",`color: ${et}`);var Ae=F(ye);E(ye),E(de);var $e=A(de,2),qe=F($e);K(qe,"style",`color: ${tt}`);var M=F(qe);E(qe),E($e),te((we,ae,Me,oe,ie,se,Te)=>{K(B,"style",`left:${s(T)??""}px;`),K(Z,"style",`
          width:${N}px;
          display: block;
          top:${we??""}px;
          left:${s(T)+10}px;`),ee(Le,ae),K(ce,"style",`color: ${s(C).aprueba>s(C).desaprueba?et:tt}`),ee(me,Me),K(de,"style",`
          width:${N}px;
          display: ${(s(H)?"block":"none")??""};
          top:${oe??""}px;
          left:${s(T)+10}px;`),ee(Ae,`Aprueba ${ie??""}`),K($e,"style",`
          width:${N}px;
          display: ${(s(H)?"block":"none")??""};
          top:${se??""}px;
          left:${s(T)+10}px;`),ee(M,`Desaprueba ${Te??""}`)},[()=>n()(u()[1])+b(),()=>g()(s(C)[f().x]),()=>s(C).aprueba>s(C).desaprueba?"A +"+I(s(C).aprueba-s(C).desaprueba):"D +"+I(s(C).desaprueba-s(C).aprueba),()=>n()(s(C).aprueba)+b(),()=>I(s(C).aprueba),()=>n()(s(C).desaprueba)+b(),()=>I(s(C).desaprueba)],D),$(Q,j)},W=Q=>{var j=rs();const B=D(()=>P()[P().length-1]);var Z=z(j),fe=F(Z);K(fe,"style",`color: ${et}`);var Le=F(fe);E(fe),E(Z);var ce=A(Z,2),me=F(ce);K(me,"style",`color: ${tt}`);var de=F(me);E(me),E(ce),te((ye,Ae,$e,qe,M)=>{K(Z,"style",`
          width:${N}px;
          display: ${(s(H)?"none":"block")??""};
          top:${ye??""}px;
          left:${Ae??""}px;`),ee(Le,`Aprueba ${$e??""}`),K(ce,"style",`
          width:${N}px;
          display: ${(s(H)?"none":"block")??""};
          top:${qe??""}px;
          left:${Ae??""}px;`),ee(de,`Desaprueba ${M??""}`)},[()=>n()(s(B).aprueba)+b(),()=>o()(s(B).fecha)+10,()=>I(s(B).aprueba),()=>n()(s(B).desaprueba)+b(),()=>I(s(B).desaprueba)],D),$(Q,j)};Re(re,Q=>{s(H)===!0?Q(S):Q(W,!1)})}$(d,Y)}}}),We(),i()}var is=G("Porcentaje <!>",1),ls=G("Promedio de <!> encuestas",1),cs=G("<!> <!>",1),us=G("<!> <!> <!>",1),fs=G("<!> <!>",1),ds=G("<!> <!> <!> <!>",1),hs=G("<!> <!>",1),vs=G('<div class="chart-container svelte-m69gcd"><!></div>'),_s=G("<!> <!> <!> <!> <!> <!> <!>",1);function qs(e,t){Ge(t,!1);const[a,i]=rt(),r=()=>ne(Vt,"$page",a),n=k(),u=k(),f=k(),o=k(),l=k(),c=k(),h=k(),v=k(),p=k(),_=k(),x=k(),g=k(),b=k(),P=k();let N=m(t,"data",8);const I="1cLEwM1H0vWy8psiUhLNrT2mmnKhzC4diKTD5YH7k_Sk",L=r().data.interactives.filter(M=>M.gDocId===I)[0],d=L.content;St(At);const w=["aprueba","desaprueba"],T=ya().domain(w).range([et,tt]),H=[1,3,5],C=["absoluto","relativo"],Y=["Todas",...ta(N().allData,"encuesta")],re=(M,we,ae,Me)=>{const oe=structuredClone(M);for(let ie=0;ie<M.length;ie++){const se=Math.floor(we/2),Te=Math.max(0,ie-se),le=Math.min(M.length-1,ie+se),he=M.slice(Te,le+1),ve=he.reduce((V,J)=>J[ae]*J[Me]+V,0),_e=he.reduce((V,J)=>J[Me]+V,0);oe[ie][ae]=ve/_e}return oe},S=d.head.headline,W=d.head.drophead,Q=aa(d.head.author),j=d.head.keywords,B=`https://www.dataista.cl${L.route}`,Z=d.head.headline,fe="";q(()=>{},()=>{y(n,0)}),q(()=>s(n),()=>{y(u,s(n)<768)}),q(()=>{},()=>{y(f,3)}),q(()=>{},()=>{y(o,"absoluto")}),q(()=>{},()=>{y(l,"Todas")}),q(()=>s(o),()=>{y(c,s(o)==="absoluto"?"valor":"normalizado")}),q(()=>U(N()),()=>{y(h,N().allData.filter(M=>M.metrica==="aprueba"))}),q(()=>U(N()),()=>{y(v,N().allData.filter(M=>M.metrica==="desaprueba"))}),q(()=>(s(l),s(h)),()=>{y(p,s(l)==="Todas"?s(h):s(h).filter(M=>M.encuesta===s(l)))}),q(()=>(s(l),s(v)),()=>{y(_,s(l)==="Todas"?s(v):s(v).filter(M=>M.encuesta===s(l)))}),q(()=>(s(p),s(f),s(c)),()=>{y(x,re(s(p),s(f),s(c),"peso"))}),q(()=>(s(_),s(f),s(c)),()=>{y(g,re(s(_),s(f),s(c),"peso"))}),q(()=>(s(x),s(g)),()=>{y(b,[...s(x),...s(g)])}),q(()=>(s(x),s(c),s(g)),()=>{y(P,s(x).map((M,we)=>({...M,aprueba:M[s(c)],desaprueba:s(g)[we][s(c)]})))}),Xe(),Ee();var Le=_s(),ce=z(Le);va(ce,{title:S,description:W,author:Q,keywords:j,url:B,siteName:Z,imageUrl:fe});var me=A(ce,2);_a(me,{children:(M,we)=>{Ne();var ae=ze();te(()=>ee(ae,d.head.headline)),$(M,ae)},$$slots:{default:!0}});var de=A(me,2);xt(de,{class:"row-buttons",children:(M,we)=>{var ae=us(),Me=z(ae);it(Me,{class:"col-buttons",children:(se,Te)=>{Ne();var le=is(),he=A(z(le));wt(he,{class:"col-buttons-group",children:(ve,_e)=>{var V=Se(),J=z(V);Je(J,1,()=>C,Ze,(pe,O)=>{const ue=D(()=>s(o)===s(O)),De=D(()=>s(n)>=768?"inline":"");$t(pe,{outline:!0,get active(){return s(ue)},get class(){return s(De)},$$events:{click:()=>y(o,s(O))},children:(Ue,ke)=>{Ne();var Oe=ze();te(()=>ee(Oe,s(O))),$(Ue,Oe)},$$slots:{default:!0}})}),$(ve,V)},$$slots:{default:!0}}),$(se,le)},$$slots:{default:!0}});var oe=A(Me,2);it(oe,{class:"col-buttons",children:(se,Te)=>{Ne();var le=ls(),he=A(z(le));wt(he,{class:"col-buttons-group",children:(ve,_e)=>{var V=Se(),J=z(V);Je(J,1,()=>H,Ze,(pe,O)=>{const ue=D(()=>s(f)===s(O));$t(pe,{outline:!0,get active(){return s(ue)},class:"inline",$$events:{click:()=>y(f,s(O))},children:(De,Ue)=>{Ne();var ke=ze();te(()=>ee(ke,s(O))),$(De,ke)},$$slots:{default:!0}})}),$(ve,V)},$$slots:{default:!0}}),Ne(),$(se,le)},$$slots:{default:!0}});var ie=A(oe,2);it(ie,{class:"col-buttons",children:(se,Te)=>{sa(se,{children:(le,he)=>{var ve=cs(),_e=z(ve);na(_e,{class:"aprob-dropdown-toggle",color:"primary",caret:!0,children:(J,pe)=>{Ne();var O=ze();te(()=>ee(O,s(l))),$(J,O)},$$slots:{default:!0}});var V=A(_e,2);ra(V,{class:"aprob-dropdown-menu",children:(J,pe)=>{var O=Se(),ue=z(O);Je(ue,1,()=>Y,Ze,(De,Ue)=>{oa(De,{$$events:{click:()=>y(l,s(Ue))},children:(ke,Oe)=>{Ne();var Ke=ze();te(()=>ee(Ke,s(Ue))),$(ke,Ke)},$$slots:{default:!0}})}),$(J,O)},$$slots:{default:!0}}),$(le,ve)},$$slots:{default:!0}})},$$slots:{default:!0}}),$(M,ae)},$$slots:{default:!0}});var ye=A(de,2);xt(ye,{class:"row-interactive",children:(M,we)=>{ha(M,{children:(ae,Me)=>{var oe=vs(),ie=F(oe);const se=D(Ia),Te=D(()=>s(o)==="absoluto"?[10,80]:[20,80]),le=D(()=>s(n)<796?{top:20,right:0,bottom:0,left:20}:s(n)<1080?{top:20,right:80,bottom:0,left:0}:null);la(ie,{x:"fecha",get y(){return s(c)},z:"metrica",get xScale(){return s(se)},get flatData(){return N().allData},get yDomain(){return s(Te)},get padding(){return s(le)},children:(he,ve)=>{var _e=hs(),V=z(_e);ca(V,{children:(pe,O)=>{var ue=ds(),De=z(ue);const Ue=D(()=>ct("%d %b %Y"));ua(De,{get format(){return s(Ue)},ticks:4});var ke=A(De,2);const Oe=D(()=>s(o)==="absoluto"?[10,20,30,40,50,60,70,80]:[20,30,40,50,60,70,80]);fa(ke,{format:Ie=>Ie+"%",get ticks(){return s(Oe)}});var Ke=A(ke,2);{var Lt=Ie=>{const Ye=D(()=>N().allData.filter(Ve=>Ve.encuesta!==s(l))),Qe=D(()=>s(n)<768?2:3);mt(Ie,{get scatterData(){return s(Ye)},fill:Jt,opacity:.5,get r(){return s(Qe)}})};Re(Ke,Ie=>{s(l)!=="Todas"&&Ie(Lt)})}var Yt=A(Ke,2);Je(Yt,1,()=>w,Ze,(Ie,Ye)=>{var Qe=fs(),Ve=z(Qe);const Ht=D(()=>s(b).filter(Wt=>Wt.metrica===s(Ye))),jt=D(()=>T(s(Ye)));da(Ve,{get lineData(){return s(Ht)},get stroke(){return s(jt)},curve:za,style:"opacity: 0.7;"});var Bt=A(Ve,2);const Ft=D(()=>s(Ye)==="aprueba"?s(p):s(_)),Et=D(()=>T(s(Ye))),Gt=D(()=>s(n)<768?2:3);mt(Bt,{get scatterData(){return s(Ft)},get fill(){return s(Et)},opacity:.7,get r(){return s(Gt)}}),$(Ie,Qe)}),$(pe,ue)},$$slots:{default:!0}});var J=A(V,2);Ya(J,{children:(pe,O)=>{const ue=D(()=>ct("%d de %B"));os(pe,{get formatTitle(){return s(ue)},get dataset(){return s(P)}})},$$slots:{default:!0}}),$(he,_e)},$$slots:{default:!0}}),E(oe),$(ae,oe)},$$slots:{default:!0}})},$$slots:{default:!0}});var Ae=A(ye,2);$a(Ae,{get route(){return L.route},get text(){return d.share.text},get subject(){return d.share.subject}});var $e=A(Ae,2);Qt($e,{});var qe=A($e,2);wa(qe,{get notes(){return d.notes}}),Zt("innerWidth",M=>y(n,M)),$(e,Le),We(),i()}export{qs as component,As as universal};
